<!DOCTYPE html>
<html>

<meta charset="UTF-8">
 
<head>
    <title>Get Best Team</title>
    <link rel="stylesheet" href="/public/assets/style.css">
</head>
 <div class="banner">
<body>
    <p class="title">Get Best Team</p>
        <form class ="label">
            <label for="class">Class:</label>
            <input type="text" id="class" name="class" required><br><br>
            <label for="spec">Spec:</label>
            <input type="text" id="spec" name="spec" required><br><br>
            <label id="result"></label>
            <input type="submit" id="getTeamButton" value="Submit">
        </form>
    <script>
        function getTeamData(e) {
            e.preventDefault() 
            const wowSpec = document.getElementById('spec').value
            const wowClass = document.getElementById('class').value
            fetch(`http://localhost:8080/getBestTeam?class=${wowClass}&spec=${wowSpec}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(data => {
                    
                    try {
                        const jsonData = JSON.parse(data);
                        console.log('data', data)
                        const formattedData = JSON.stringify(jsonData, null, 2);
                        console.log(formattedData)
                        //document.getElementById('result').textContent = `the rank value is ${jsonData.rank}`;
                        document.getElementById('result').textContent = formattedData;
                    } catch (error) {
                         console.error('JSON parsing error:', error);
                    }
                })
                .catch(error => {
                    // Handle errors here
                    console.error('Fetch error:', error);
                });
        }
 
        const getTeamButton = document.getElementById('getTeamButton');
        getTeamButton.addEventListener('click', getTeamData);
    </script>
    

</body>
</div>
 
</html>